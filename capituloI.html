<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Reproductor seguro</title>
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; media-src https://dl.dropboxusercontent.com/scl/fi/b9wgabg2anwul9nid2rxo/El-itinerario-de-las-palmeras-I-grabaci-n-obra-1400-00.aif?rlkey=fk58gmkjqsu3af8ob5rtibkb1&dl=0; img-src 'self' data:; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'; frame-ancestors 'none'">
  <style>
    html, body { height: 100%; margin: 0; background:#0b0b0c; color:#eee; font-family: system-ui, Arial, sans-serif; }
    .wrap { min-height: 100%; display: grid; place-items: center; padding: 24px; user-select: none; }
    .card { width: min(800px, 92vw); background:#141416; border: 1px solid #26262a; border-radius: 16px; padding: 20px; box-shadow: 0 8px 30px rgba(0,0,0,.35); }
    h1 { font-size: 1.1rem; margin: 0 0 12px; font-weight: 600; color:#fafafa; text-align:center; }
    .player { display: grid; gap: 16px; }
    audio, video { width: 100%; outline: none; border-radius: 10px; background:#000; }
    /* Evita arrastrar/seleccionar */
    * { -webkit-user-drag: none; }
  </style>
</head>
<body>
  <div class="wrap" oncontextmenu="return false;">
    <div class="card">
      <h1>Reproducción</h1>

      <!-- ▶️ Sustituye la URL por tu enlace "raw=1" de Dropbox -->
      <!-- Si es AUDIO, deja el <audio>. Si es VÍDEO, usa el <video> comentado. -->

      <div class="player" id="playerArea">
        <!-- AUDIO -->
        <audio id="media" controls controlsList="nodownload noplaybackrate noremoteplayback nofullscreen"
               preload="metadata" src="https://dl.dropboxusercontent.com/scl/fi/b9wgabg2anwul9nid2rxo/El-itinerario-de-las-palmeras-I-grabaci-n-obra-1400-00.aif?rlkey=fk58gmkjqsu3af8ob5rtibkb1&dl=0">
            Tu navegador no soporta el elemento de audio.
        </audio>

        <!-- VÍDEO (alternativa). Comenta el <audio> de arriba y descomenta esto si tu archivo es .mp4/.mov -->
        <!--
        <video id="media" controls controlsList="nodownload noplaybackrate noremoteplayback nofullscreen"
               preload="metadata" playsinline
               src="https://www.dropbox.com/s/ID/archivo.mp4?raw=1">
            Tu navegador no soporta el elemento de vídeo.
        </video>
        -->
      </div>
      <noscript>Activa JavaScript para reforzar la protección.</noscript>
    </div>
  </div>

  <script>
    // Bloquear clic derecho, arrastre, selección y algunos atajos comunes
    const root = document.documentElement;
    const media = document.getElementById('media');

    // Evitar menú contextual en toda la página
    document.addEventListener('contextmenu', e => e.preventDefault());

    // Evitar arrastrar
    document.addEventListener('dragstart', e => e.preventDefault());

    // Evitar selección / copia
    document.addEventListener('selectstart', e => e.preventDefault());
    document.addEventListener('copy', e => e.preventDefault());
    document.addEventListener('cut', e => e.preventDefault());

    // Bloquear teclas típicas (no es infalible, pero reduce)
    document.addEventListener('keydown', e => {
      const key = e.key.toLowerCase();
      const ctrl = e.ctrlKey || e.metaKey;
      const forbidden = (
        // Guardar/Imprimir/Ver código/Descargar/DevTools/Fullscreen
        (ctrl && ['s','p','u','o','i','j','c','+', '-', '0'].includes(key)) ||
        (key === 'f12') || (key === 'printscreen') ||
        (key === 'enter' && (e.altKey || e.ctrlKey || e.metaKey)) ||
        (key === 'f11')
      );
      if (forbidden) {
        e.preventDefault();
        e.stopPropagation();
        return false;
      }
    }, true);

    // Quitar Picture-in-Picture si el navegador lo permite
    try {
      if ('disablePictureInPicture' in HTMLVideoElement.prototype && media.tagName === 'VIDEO') {
        media.disablePictureInPicture = true;
      }
    } catch {}

    // Evitar atajos sobre el reproductor
    media && media.addEventListener('contextmenu', e => e.preventDefault());
    media && media.addEventListener('dragstart', e => e.preventDefault());

    // Evita abrir en nueva pestaña al hacer middle-click accidental
    document.addEventListener('auxclick', e => {
      if (e.button === 1) e.preventDefault();
    });

    // Opcional: Autoplay silencioso (si quieres que inicie solo en audio)
    // media && media.play().catch(()=>{ /* Algunos navegadores bloquean autoplay */ });
  </script>
</body>
</html>